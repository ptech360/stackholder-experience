<div class="container">
  <!-- <div class="row">
    <div class="col-sm-offset-2 col-sm-10"> -->
    <h2 style="font-family:serif">Configuration</h2>
    <hr>
    <!-- </div>
  </div> -->
  <form class="form-horizontal" [formGroup]="configForm" (submit)="submitConfig()">
    <div class="form-group">
      <label class="control-label col-sm-2" for="unit">Unit : </label>
      <div class="col-sm-10">
        <select class="form-control" name="unit" formControlName="unitId">
            <option *ngFor="let unit of units;let u = index;" [value]="unit.departmentId">{{unit.department}}</option>
          </select>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="stachholder">Stakeholder : </label>
      <div class="col-sm-10">
        <select class="form-control" name="stackholder" formControlName="stackholderId">
            <option *ngFor="let stackholder of stackholders;let s = index;" [value]="stackholder.id">{{stackholder.stackholder}}</option>
          </select>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">Touch Points</label>
      <div class="col-sm-10" formArrayName="touchpoints">
        <ul class="nav nav-tabs">
          <li [ngClass]="{'active': tab == configForm.controls.touchpoints.controls.length - 1}" *ngFor="let tp of configForm.controls.touchpoints.controls;let tab=index;">
            <a data-toggle="tab" [attr.data-target]="'#tab'+tab">Touch Point {{tab+1}} 
                <button type="button" class="close" style="padding-left:5px;" (click)="removeTouchPoint(tab)">&times;</button>
              </a>
          </li>
          <li><button class="btn btn-default" (click)="addTouchPoint()" [disabled]="configForm.controls.touchpoints.invalid">Add</button></li>
        </ul>
        <div class="tab-content" style="padding: 20px 10px 0px 10px;">
          <div [attr.id]="'tab'+t" class="tab-pane fade" 
          [ngClass]="{'in active': t == configForm.controls.touchpoints.controls.length - 1}"
          *ngFor="let tp of configForm.controls.touchpoints.controls;let t=index;" [formGroupName]="t">
            <div class="form-group">
              <label class="control-label col-sm-2" style="text-align:left">Touch Point : </label>
              <div class="col-sm-10">
                <textarea class="form-control" formControlName="touchPoint"></textarea>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" style="text-align:left">Experience : </label>
              <div class="col-sm-10">
                <textarea class="form-control" formControlName="experience"></textarea>
              </div>
            </div>

            <div class="form-group">
              <input formControlName="channelIds" [(ngModel)]="checkedChannels" hidden>
              <label class="control-label col-sm-2" style="text-align:left">Channels : </label>
              <div class="col-sm-10">
                  <label class="checkbox-inline" *ngFor="let channel of channels;let c = index;">
                      <input type="checkbox" name="channel" [(ngModel)]="selectedChannel[channel.id]" [ngModelOptions]="{standalone: true}"(change)="getChannels(tp, selectedChannel)">{{channel.channel}}
                  </label>
              </div>
            </div>

            <div class="form-group">
                <input formControlName="dataSourceIds" [(ngModel)]="checkedDataSources" hidden>
              <label class="control-label col-sm-2" style="text-align:left">Data Sources : </label>
              <div class="col-sm-10">
                  <label class="checkbox-inline" *ngFor="let dataSource of dataSources;let d = index;">
                      <input type="checkbox" name="dataSource" [(ngModel)]="selectedDs[dataSource.id]" [ngModelOptions]="{standalone: true}"(change)="getdataSources(tp,selectedDs)">{{dataSource.dataSource}}
                  </label>
              </div>
            </div>

            <!-- <div class="form-group">
              <label class="control-label col-sm-2" style="text-align:left">Channels : </label>
              <div class="col-sm-10">
                <select class="form-control" multiple formControlName="channelIds">
                  <option *ngFor="let channel of channels;let c = index;" [value]="channel.id">{{channel.channel}}</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" style="text-align:left">Data Sources : </label>
              <div class="col-sm-10">
                <select class="form-control" multiple formControlName="dataSourceIds">
                  <option *ngFor="let dataSource of dataSources;let d = index;" [value]="dataSource.id">{{dataSource.dataSource}}</option>
                </select>
              </div>
            </div> -->
            <!-- <div class="form-group">
              <label class="control-label col-sm-2" for="stachholder">Channels : </label>
              <div class="col-sm-10">
                <div class="checkbox-list">
                  <input class="form-control" data-toggle="collapse" href="#collapse1" (focus)="list1=true" (focusout)="list1=false">
                  <ul id="collapse1" class="collapse" *ngIf="list1">
                    <li>
                      <label>Channel 1
                        <input type="checkbox">
                        <span class="is-present"></span>
                      </label>
                    </li>
                    <li>
                      <label>Channel 2
                        <input type="checkbox">
                        <span class="is-present"></span>
                      </label>
                    </li>
                    <li>
                      <label>Channel 3
                        <input type="checkbox">
                        <span class="is-present"></span>
                      </label>
                    </li>
                    <li>
                      <label>Channel 4
                        <input type="checkbox">
                        <span class="is-present"></span>
                      </label>
                    </li>
                    <li>
                      <label> Channel 5
                        <input type="checkbox">
                        <span class="is-present"></span>
                      </label>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="stachholder">Data Sources : </label>
              <div class="col-sm-10">
                <fieldset class="checkbox-list">
                  <input class="form-control" data-toggle="collapse" href="#collapse2" (focus)="list2=true;" (focusout)="list2=false">
                  <ul id="collapse2" class="collapse">
                    <li>
                      <label>Data Source 1
                          <input type="checkbox" >
                          <span class="is-present"></span>
                        </label>
                    </li>
                    <li>
                      <label>Data Source 2
                          <input type="checkbox">
                          <span class="is-present"></span>
                        </label>
                    </li>
                    <li>
                      <label>Data Source 3
                          <input type="checkbox">
                          <span class="is-present"></span>
                        </label>
                    </li>
                    <li>
                      <label>Data Source 4
                          <input type="checkbox">
                          <span class="is-present"></span>
                        </label>
                    </li>
                    <li>
                      <label> Data Source 5
                          <input type="checkbox">
                          <span class="is-present"></span>
                        </label>
                    </li>
                  </ul>
                </fieldset>
              </div>
            </div> -->
            <div class="form-group">
              <div class="col-sm-offset-2 col-sm-8">
                <button type="submit" class="btn btn-default" [disabled]="configForm.invalid">Submit</button>
                <button type="button" class="btn btn-default" (click)="clearConfigForm()">Clear</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>    
  </form>
</div>